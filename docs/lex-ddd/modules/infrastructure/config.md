# 配置模块

## 模块介绍

配置模块(`config.py`)是基础设施层的重要组件，负责管理应用程序的配置信息，包括环境变量、系统参数和运行时配置等。该模块基于Pydantic实现，提供了类型安全和验证功能。

## 功能特性

- 环境变量管理
- 配置验证和类型检查
- 多环境配置支持
- 敏感信息保护
- 动态配置更新

## 配置项说明

配置项在`.env`文件中定义，示例：

```env
# 应用基础配置
APP_NAME=LexTrade
APP_ENV=development
DEBUG=true

# 服务器配置
HOST=0.0.0.0
PORT=8000

# 安全配置
SECRET_KEY=your-secret-key
ACCESS_TOKEN_EXPIRE_MINUTES=30
```

## 使用示例

### 基本用法

```python
from infrastructure.config import get_settings

settings = get_settings()
app_name = settings.APP_NAME
debug_mode = settings.DEBUG
```

### 环境特定配置

```python
from infrastructure.config import get_env_config

config = get_env_config()
if config.is_development:
    # 开发环境特定配置
    pass
```

## AI提示词使用技巧

### 1. 添加新配置项

提示词模板：
```
请帮我添加以下配置项：
1. 配置名称：[配置名]
2. 数据类型：[类型]
3. 默认值：[默认值]
4. 是否必填：[是/否]
5. 配置说明：[说明文本]
```

示例：
```
请帮我添加以下配置项：
1. 配置名称：MAX_CONNECTIONS
2. 数据类型：int
3. 默认值：100
4. 是否必填：是
5. 配置说明：最大并发连接数
```

### 2. 环境配置管理

提示词模板：
```
请帮我设置以下环境配置：
1. 环境名称：[环境名]
2. 需要的配置项：[配置项列表]
3. 配置值：[对应的值]
4. 是否需要加密：[是/否]
```

### 3. 配置验证规则

提示词模板：
```
请帮我添加以下配置验证规则：
1. 配置项：[配置名]
2. 验证类型：[验证方式]
3. 验证条件：[条件描述]
4. 错误提示：[提示信息]
```

## 最佳实践

1. 使用类型注解
2. 实现配置缓存
3. 区分环境配置
4. 保护敏感信息
5. 实现配置热更新

## 常见问题

1. **配置加载失败**
   - 原因：环境变量未设置
   - 解决：检查.env文件

2. **类型验证错误**
   - 原因：配置值类型不匹配
   - 解决：检查数据类型

3. **配置更新不生效**
   - 原因：缓存未刷新
   - 解决：强制更新配置

## 注意事项

1. 不要在代码中硬编码配置
2. 定期更新密钥和令牌
3. 使用环境变量管理敏感信息
4. 实现配置版本控制
5. 记录配置变更日志